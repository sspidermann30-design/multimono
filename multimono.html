<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Brand Tycoon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #0e0e0e;
            --card-bg: #1c1c1c;
            --accent: #0088cc;
            --money-color: #2ecc71;
        }

        body {
            background-color: var(--bg-color);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            padding: 15px;
            background: #161616;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
        }

        .balance {
            font-size: 20px;
            font-weight: bold;
            color: var(--money-color);
        }

        /* –°–µ—Ç–∫–∞ –±—Ä–µ–Ω–¥–æ–≤ */
        .board {
            flex: 1;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 15px;
            scroll-behavior: smooth;
        }

        .brand-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 12px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .brand-card img {
            width: 40px;
            height: 40px;
            margin-bottom: 8px;
            border-radius: 8px;
            background: white; /* –î–ª—è –ª–æ–≥–æ—Ç–∏–ø–æ–≤ –Ω–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–º —Ñ–æ–Ω–µ */
            padding: 2px;
        }

        .brand-card.active {
            border-color: #f1c40f;
            box-shadow: 0 0 20px rgba(241, 196, 15, 0.3);
            transform: scale(1.05);
            background: #252525;
        }

        .brand-name {
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }

        .brand-price {
            font-size: 10px;
            color: #888;
        }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .controls {
            padding: 20px;
            background: #161616;
            border-top: 1px solid #333;
            text-align: center;
        }

        .roll-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 16px;
            width: 90%;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 136, 204, 0.3);
        }

        .roll-btn:active {
            transform: scale(0.98);
        }

        #status-text {
            margin-bottom: 10px;
            font-size: 14px;
            color: #aaa;
        }
    </style>
</head>
<body>

    <div class="header">
        <div id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="balance">$<span id="balance-val">2500</span></div>
    </div>

    <div class="board" id="board">
        </div>

    <div class="controls">
        <div id="status-text">–í–∞—à —Ö–æ–¥!</div>
        <button class="roll-btn" onclick="play()">–ë–†–û–°–ò–¢–¨ –ö–£–ë–ò–ö üé≤</button>
    </div>

    <script>
    const tg = window.Telegram.WebApp;
tg.expand();

document.getElementById('user-name').innerText = tg.initDataUnsafe.user?.first_name || "–ú–∞–≥–Ω–∞—Ç";

// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—Ä–µ–Ω–¥–æ–≤ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ –≥—Ä—É–ø–ø–∞–º (—Ü–≤–µ—Ç–∞–º)
const brandData = [
    { name: "NVIDIA", group: "it", color: "#3498db" }, { name: "Apple", group: "it", color: "#3498db" },
    { name: "Google", group: "it", color: "#3498db" }, { name: "Microsoft", group: "it", color: "#3498db" },
    { name: "Amazon", group: "it", color: "#3498db" }, { name: "Tesla", group: "auto", color: "#e74c3c" },
    { name: "Porsche", group: "auto", color: "#e74c3c" }, { name: "BMW", group: "auto", color: "#e74c3c" },
    { name: "Toyota", group: "auto", color: "#e74c3c" }, { name: "Mercedes", group: "auto", color: "#e74c3c" },
    { name: "Nike", group: "fashion", color: "#f39c12" }, { name: "Adidas", group: "fashion", color: "#f39c12" },
    { name: "Puma", group: "fashion", color: "#f39c12" }, { name: "Gucci", group: "luxury", color: "#f1c40f" },
    { name: "Rolex", group: "luxury", color: "#f1c40f" }, { name: "Dior", group: "luxury", color: "#f1c40f" },
    { name: "Coca-Cola", group: "food", color: "#2ecc71" }, { name: "McDonald‚Äôs", group: "food", color: "#2ecc71" },
    { name: "Starbucks", group: "food", color: "#2ecc71" }
    // –ú–æ–∂–Ω–æ –¥–æ–ø–∏—Å—ã–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ, —Å–æ–±–ª—é–¥–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É
];

const brands = brandData.map((b, i) => ({
    ...b,
    price: 150 + (i * 30),
    owned: false,
    domain: b.name.toLowerCase().replace(/[^a-z0-9]/g, '') + ".com"
}));

let currentPos = 0;
let balance = 2500;
let inventory = [];

function init() {
    const board = document.getElementById('board');
    board.innerHTML = '';
    
    brands.forEach((brand, i) => {
        const card = document.createElement('div');
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∫—É–ø–ª–µ–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞, –µ—Å–ª–∏ –æ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
        card.className = `brand-card ${i === currentPos ? 'active' : ''} ${brand.owned ? 'owned' : ''}`;
        card.id = `card-${i}`;
        card.style.borderTop = `5px solid ${brand.color}`; // –ü–æ–ª–æ—Å–∫–∞ –≥—Ä—É–ø–ø—ã
        
        const logoUrl = `https://logo.clearbit.com/${brand.domain}`;
        
        card.innerHTML = `
            <img src="${logoUrl}" onerror="this.src='https://img.icons8.com/ios/50/ffffff/company.png'">
            <div class="brand-name">${brand.name}</div>
            <div class="brand-price">${brand.owned ? '–ö–£–ü–õ–ï–ù–û' : '$' + brand.price}</div>
        `;
        board.appendChild(card);
    });
}

function checkCollection(groupName) {
    const groupItems = brands.filter(b => b.group === groupName);
    const ownedInGroup = groupItems.filter(b => b.owned);
    
    if (groupItems.length === ownedInGroup.length) {
        balance += 1000; // –ë–æ–Ω—É—Å –∑–∞ —Å–±–æ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        document.getElementById('balance-val').innerText = balance;
        tg.showAlert(`üî• –ú–û–ù–û–ü–û–õ–ò–Ø! –í—ã —Å–æ–±—Ä–∞–ª–∏ –≤—Å–µ –±—Ä–µ–Ω–¥—ã —Å–µ–∫—Ç–æ—Ä–∞ ${groupName.toUpperCase()} –∏ –ø–æ–ª—É—á–∏–ª–∏ –±–æ–Ω—É—Å $1000!`);
    }
}

function play() {
    const dice = Math.floor(Math.random() * 6) + 1;
    document.getElementById('status-text').innerText = `–í—ã–ø–∞–ª–æ: ${dice}`;
    document.getElementById(`card-${currentPos}`).classList.remove('active');

    currentPos = (currentPos + dice) % brands.length;
    const newCard = document.getElementById(`card-${currentPos}`);
    newCard.classList.add('active');
    newCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

    const brand = brands[currentPos];
    
    if (!brand.owned) {
        setTimeout(() => {
            tg.showConfirm(`–ö—É–ø–∏—Ç—å ${brand.name} –∑–∞ $${brand.price}?`, (confirmed) => {
                if (confirmed) {
                    if (balance >= brand.price) {
                        balance -= brand.price;
                        brand.owned = true;
                        document.getElementById('balance-val').innerText = balance;
                        init(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –¥–æ—Å–∫—É, —á—Ç–æ–±—ã –ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∫—É–ø–ª–µ–Ω–Ω–æ–µ
                        checkCollection(brand.group);
                    } else {
                        tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
                    }
                }
            });
        }, 500);
    } else {
        document.getElementById('status-text').innerText = `–≠—Ç–æ –≤–∞—à –±—Ä–µ–Ω–¥: ${brand.name}`;
    }
}

init();
    </script>
</body>
</html>
