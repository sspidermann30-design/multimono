<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Brand Tycoon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --card-bg: #222;
            --accent-green: #28a745;
            --accent-blue: #3498db;
        }

        body {
            margin: 0;
            background-color: var(--bg-color);
            color: white;
            font-family: 'Segoe UI', Roboto, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* –ú–ï–ù–Æ –õ–û–ë–ë–ò */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #333 0%, #000 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .menu-content {
            background: #222;
            padding: 25px;
            border-radius: 20px;
            border: 2px solid #444;
            text-align: center;
            width: 85%;
            max-width: 400px;
        }

        .lobby-list {
            max-height: 200px;
            overflow-y: auto;
            margin: 15px 0;
            background: #111;
            border-radius: 10px;
            padding: 10px;
        }

        .lobby-item {
            background: #333;
            margin-bottom: 8px;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* –ò–ì–†–û–í–û–ï –ü–û–õ–ï */
        #game-container {
            display: none; /* –°–∫—Ä—ã—Ç–æ –¥–æ –Ω–∞–∂–∞—Ç–∏—è –°—Ç–∞—Ä—Ç */
            flex-direction: column;
            align-items: center;
        }

        #board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 2px;
            width: 98vw;
            height: 98vw;
            max-width: 600px;
            max-height: 600px;
            background: #444;
            position: relative;
        }

        /* –ö–õ–ï–¢–ö–ò */
        .cell {
            background: var(--card-bg);
            border: 1px solid #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            font-size: 6px;
            padding: 2px 0;
            position: relative;
        }

        .cell b { font-size: 8px; }
        .cell img { width: 70%; max-height: 20px; object-fit: contain; }

        /* –¶–ï–ù–¢–† –ü–û–õ–Ø */
        .board-center {
            grid-column: 2 / 10;
            grid-row: 2 / 10;
            background: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* –ö–ê–†–¢–û–ß–ö–ê –í –¶–ï–ù–¢–†–ï */
        .brand-card-display {
            background: white;
            color: black;
            width: 80%;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* –ö–ù–û–ü–ö–ò */
        button {
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }

        .main-btn {
            background: var(--accent-green);
            color: white; border: none; padding: 12px 20px;
            border-radius: 10px; width: 100%; font-size: 16px;
        }

        .roll-btn {
            margin-top: 15px;
            padding: 15px 40px;
            background: var(--accent-blue);
            color: white; border: none; border-radius: 30px;
            font-size: 18px;
        }

        /* –§–ò–®–ö–ê –ò–ì–†–û–ö–ê */
        .player-token {
            width: 15px; height: 15px;
            background: red; border-radius: 50%;
            border: 2px solid white;
            position: absolute;
            z-index: 50;
            transition: all 0.4s ease;
        }
    </style>
</head>
<body>

    <div id="lobby-menu" class="overlay">
        <div class="menu-content">
            <h1>Brand Tycoon</h1>
            <div class="lobby-list" id="lobbyList">
                <div class="lobby-item"><span>–ú–∏—Ä #1 (–û–±—ã—á–Ω—ã–π)</span> <span>1/4üë§</span> <button onclick="startGame()">–í–•–û–î</button></div>
            </div>
            <button class="main-btn" onclick="showCreate()">–°–û–ó–î–ê–¢–¨ –°–í–û–Æ –ò–ì–†–£</button>
        </div>
    </div>

    <div id="game-container">
        <div id="board">
            <div class="board-center" id="centerArea">
                <div style="text-align:center; color:#444;">
                    <h2>BRAND<br>TYCOON</h2>
                    <p>–ë—Ä–æ—Å–∞–π—Ç–µ –∫—É–±–∏–∫</p>
                </div>
            </div>
        </div>
        <div id="status-text" style="margin-top:10px;">–ë–∞–ª–∞–Ω—Å: <span id="balance">2500</span>$</div>
        <button class="roll-btn" onclick="rollDice()">–ë–†–û–°–ò–¢–¨ –ö–£–ë–ò–ö üé≤</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const brandsData = [
            { name: "NVIDIA", price: 150, group: "it", color: "#76b900", logo: "img/nvidia.png" },
            { name: "Apple", price: 200, group: "it", color: "#3498db", logo: "img/apple.png" },
            { name: "Google", price: 250, group: "it", color: "#3498db", logo: "img/google.png" },
            { name: "Microsoft", price: 300, group: "it", color: "#3498db", logo: "img/microsoft.png" },
            { name: "Tesla", price: 400, group: "auto", color: "#e74c3c", logo: "https://cdn-icons-png.flaticon.com/512/5969/5969046.png" },
            { name: "BMW", price: 350, group: "auto", color: "#e74c3c", logo: "https://cdn-icons-png.flaticon.com/512/5968/5968144.png" }
            // –î–æ–±–∞–≤—å —Å—é–¥–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ 30 –±—Ä–µ–Ω–¥–æ–≤ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏
        ];

        let balance = 2500;
        let currentPos = 0;
        const totalCells = 36;
        let cells = [];

        function startGame() {
            document.getElementById('lobby-menu').style.display = 'none';
            document.getElementById('game-container').style.display = 'flex';
            initBoard();
        }

        function initBoard() {
            const board = document.getElementById('board');
            
            for (let i = 0; i < totalCells; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.id = `cell-${i}`;
                
                // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã Grid –¥–ª—è "–û–±—Ä—É—á–∞"
                let row, col;
                if (i < 10) { row = 1; col = i + 1; } 
                else if (i < 19) { row = i - 8; col = 10; }
                else if (i < 28) { row = 10; col = 10 - (i - 18); }
                else { row = 10 - (i - 27); col = 1; }
                
                cell.style.gridRow = row;
                cell.style.gridColumn = col;

                if (i === 0) {
                    cell.innerHTML = "<b>–°–¢–ê–†–¢</b><div style='color:gold; font-size:10px;'>üí∞</div>";
                    cell.style.background = "#333";
                } else {
                    const brand = brandsData[(i - 1) % brandsData.length];
                    cell.innerHTML = `
                        <div style="width:100%; height:4px; background:${brand.color}"></div>
                        <img src="${brand.logo}">
                        <span>${brand.price}$</span>
                    `;
                }
                board.appendChild(cell);
            }
            createPlayer();
        }

        function createPlayer() {
            const token = document.createElement('div');
            token.className = 'player-token';
            token.id = 'player';
            document.getElementById('board').appendChild(token);
            updatePlayerPosition();
        }

        function updatePlayerPosition() {
            const cell = document.getElementById(`cell-${currentPos}`);
            const player = document.getElementById('player');
            const rect = cell.getBoundingClientRect();
            const boardRect = document.getElementById('board').getBoundingClientRect();
            
            player.style.left = (cell.offsetLeft + 10) + 'px';
            player.style.top = (cell.offsetTop + 10) + 'px';
        }

        function rollDice() {
            const move = Math.floor(Math.random() * 6) + 1;
            currentPos = (currentPos + move) % totalCells;
            updatePlayerPosition();
            
            const currentBrand = brandsData[(currentPos - 1) % brandsData.length];
            if (currentPos !== 0) {
                showCard(currentBrand);
            }
        }

        function showCard(brand) {
            const center = document.getElementById('centerArea');
            center.innerHTML = `
                <div class="brand-card-display" style="border-top: 8px solid ${brand.color}">
                    <img src="${brand.logo}" style="width:50px;">
                    <h2 style="margin:5px 0;">${brand.name}</h2>
                    <p>–¶–µ–Ω–∞: ${brand.price}$</p>
                    <button class="main-btn" onclick="buy('${brand.name}', ${brand.price})">–ö–£–ü–ò–¢–¨</button>
                </div>
            `;
        }

        function buy(name, price) {
            if (balance >= price) {
                balance -= price;
                document.getElementById('balance').innerText = balance;
                alert(`–í—ã –∫—É–ø–∏–ª–∏ ${name}!`);
                document.getElementById('centerArea').innerHTML = '<h2>–£–°–ü–ï–•!</h2>';
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!");
            }
        }
    </script>
</body>
</html>
